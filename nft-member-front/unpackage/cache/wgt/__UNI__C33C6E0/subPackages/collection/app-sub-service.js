(this["webpackJsonp"]=this["webpackJsonp"]||[]).push([["subPackages/collection/app-sub-service"],{"3cc9":function(t,s,i){"use strict";i.d(s,"b",(function(){return a})),i.d(s,"c",(function(){return o})),i.d(s,"a",(function(){return e}));var e={uImage:i("19b5").default,uIcon:i("aa94").default,uCountDown:i("788c").default},a=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("view",{staticClass:t._$s(0,"sc","page-content"),attrs:{_i:0}},[i("view",{staticClass:t._$s(1,"sc","topBg"),style:t._$s(1,"s",{background:t.coverColor}),attrs:{_i:1}},[i("view",{staticClass:t._$s(2,"sc","collection-cover"),attrs:{_i:2}},[i("view",{staticClass:t._$s(3,"sc","imgBorder"),attrs:{_i:3}},[i("u-image",{attrs:{src:"/static/img/detail/border.png",width:"400rpx",height:"400rpx",_i:4}}),i("view",{staticClass:t._$s(5,"sc","imgContent"),attrs:{_i:5}},[i("u-image",{staticClass:t._$s(6,"sc","cover"),attrs:{mode:"widthFix",src:t.collectionDetail.cover,_i:6},on:{load:t.coverOnload}})],1)],1)]),i("view",{staticClass:t._$s(7,"sc","img"),attrs:{_i:7}},[i("u-image",{attrs:{src:"/static/img/detail/foundation.png",width:"750rpx",mode:"widthFix",_i:8}})],1)]),i("view",{staticClass:t._$s(9,"sc","information"),attrs:{_i:9}},[i("view",{staticClass:t._$s(10,"sc","topInfo"),attrs:{_i:10}},[i("view",{staticClass:t._$s(11,"sc","arrow"),attrs:{_i:11}},[i("u-image",{attrs:{src:"/static/img/detail/arrow.png",width:"30rpx",height:"26rpx",_i:12}})],1),i("view",{staticClass:t._$s(13,"sc","name"),attrs:{_i:13}},[t._v(t._$s(13,"t0-0",t._s(t.collectionDetail.name)))]),i("view",{staticClass:t._$s(14,"sc","stock"),attrs:{_i:14}},[i("view",{staticClass:t._$s(15,"sc","left"),attrs:{_i:15}}),i("view",{staticClass:t._$s(16,"sc","right"),attrs:{_i:16}},[t._v(t._$s(16,"t0-0",t._s(t.collectionDetail.quantity)))])]),i("view",{staticClass:t._$s(17,"sc","iconGroup"),attrs:{_i:17}},[i("view",{staticClass:t._$s(18,"sc","iconItem"),attrs:{_i:18}})])])]),i("view",{staticClass:t._$s(19,"sc","creator-info"),attrs:{_i:19}},[i("view",[i("u-image",{staticClass:t._$s(21,"sc","creator-avatar"),attrs:{width:"72rpx",height:"72rpx",shape:"circle",src:t.collectionDetail.creatorAvatar,_i:21}})],1),i("view",{staticClass:t._$s(22,"sc","creator-info-r"),attrs:{_i:22}},[i("view",{staticClass:t._$s(23,"sc","creator-info-rt"),attrs:{_i:23}}),i("view",{staticClass:t._$s(24,"sc","creator-info-rb u-line-1"),attrs:{_i:24}},[t._v(t._$s(24,"t0-0",t._s(t.collectionDetail.creatorName)))])]),i("view",{staticClass:t._$s(25,"sc","creator-info-r2"),attrs:{_i:25},on:{click:t.creatorPage}},[i("u-icon",{attrs:{name:"arrow-right",size:"22",_i:26}})],1)]),i("view",{directives:[{name:"show",rawName:"v-show",value:t._$s(27,"v-show",t.collectionDetail.subCommoditys&&t.collectionDetail.subCommoditys.length>0),expression:"_$s(27,'v-show',collectionDetail.subCommoditys && collectionDetail.subCommoditys.length > 0)"}],attrs:{_i:27}},[i("view",{staticClass:t._$s(28,"sc","div-line"),attrs:{_i:28}}),i("view",{staticClass:t._$s(29,"sc","mystery-box"),attrs:{_i:29}},[i("view",{staticClass:t._$s(30,"sc","mystery-box-title"),attrs:{_i:30}},[i("view",{staticClass:t._$s(31,"sc","mystery-box-title-l"),attrs:{_i:31}}),i("view",{staticClass:t._$s(32,"sc","mystery-box-title-r"),attrs:{_i:32}},[i("text")])]),i("view",{staticClass:t._$s(34,"sc","mystery-box-commoditys"),attrs:{_i:34}},t._l(t._$s(35,"f",{forItems:t.collectionDetail.subCommoditys}),(function(s,e,a,o){return i("view",{key:t._$s(35,"f",{forIndex:a,key:"35-"+o}),staticClass:t._$s("35-"+o,"sc","mystery-box-commodity"),attrs:{_i:"35-"+o}},[i("view",{staticClass:t._$s("36-"+o,"sc","mystery-box-commodity-l"),attrs:{_i:"36-"+o}},[i("u-image",{attrs:{width:"120rpx",height:"120rpx","border-radius":"10",src:s.cover,_i:"37-"+o}})],1),i("view",{staticClass:t._$s("38-"+o,"sc","mystery-box-commodity-r"),attrs:{_i:"38-"+o}},[i("view",{staticClass:t._$s("39-"+o,"sc","mystery-box-commodity-r1 u-line-1"),attrs:{_i:"39-"+o}},[t._v(t._$s("39-"+o,"t0-0",t._s(s.name)))]),i("view",{staticClass:t._$s("40-"+o,"sc","mystery-box-commodity-r2"),attrs:{_i:"40-"+o}},[t._v(t._$s("40-"+o,"t0-0",t._s(s.probability)))])])])})),0)])]),i("view",{staticClass:t._$s(41,"sc","div-line"),attrs:{_i:41}}),i("view",{staticClass:t._$s(42,"sc","creator-story"),attrs:{_i:42}},[i("view",{staticClass:t._$s(43,"sc","story-title"),attrs:{_i:43}}),i("view",{staticClass:t._$s(44,"sc","story-content"),attrs:{_i:44}},t._l(t._$s(45,"f",{forItems:t.collectionDetail.storyPicLinks}),(function(s,e,a,o){return i("image",{key:t._$s(45,"f",{forIndex:a,key:"45-"+o}),attrs:{src:t._$s("45-"+o,"a-src",s),_i:"45-"+o}})})),0)]),i("view",{directives:[{name:"show",rawName:"v-show",value:t._$s(46,"v-show","2"==t.collectionDetail.commodityType),expression:"_$s(46,'v-show',collectionDetail.commodityType == '2')"}],staticClass:t._$s(46,"sc","buy-instructions"),attrs:{_i:46}},[i("view",{staticClass:t._$s(47,"sc","buy-instructions-title"),attrs:{_i:47}}),i("view",{staticClass:t._$s(48,"sc","buy-instructions-content"),attrs:{_i:48}},[i("view"),i("view"),i("view")])]),i("view",{staticClass:t._$s(52,"sc","buy-instructions"),attrs:{_i:52}},[i("view",{staticClass:t._$s(53,"sc","buy-instructions-title"),attrs:{_i:53}}),i("view",{staticClass:t._$s(54,"sc","buy-instructions-content"),attrs:{_i:54}})]),i("view",{staticClass:t._$s(55,"sc","fixed-bottom"),attrs:{_i:55}},[i("view",{staticClass:t._$s(56,"sc","fixed-bottom-content"),attrs:{_i:56}},[i("view",{staticClass:t._$s(57,"sc","price-info"),attrs:{_i:57}},[i("view"),i("view",[t._v(t._$s(59,"t0-0",t._s(t.moneyFormat(t.collectionDetail.price))))])]),i("view",[i("view",{directives:[{name:"show",rawName:"v-show",value:t._$s(61,"v-show",0==t.collectionDetail.stock),expression:"_$s(61,'v-show',collectionDetail.stock == 0)"}],staticClass:t._$s(61,"sc","sell-out"),attrs:{_i:61}}),i("view",{directives:[{name:"show",rawName:"v-show",value:t._$s(62,"v-show",t.collectionDetail.stock>0),expression:"_$s(62,'v-show',collectionDetail.stock > 0)"}],attrs:{_i:62}},[i("view",{directives:[{name:"show",rawName:"v-show",value:t._$s(63,"v-show",!t.hasPreSale),expression:"_$s(63,'v-show',!hasPreSale)"}],attrs:{_i:63}},[i("view",{directives:[{name:"show",rawName:"v-show",value:t._$s(64,"v-show",0==t.collectionDetail.surplusSecond),expression:"_$s(64,'v-show',collectionDetail.surplusSecond == 0)"}],staticClass:t._$s(64,"sc","buy-now"),attrs:{_i:64},on:{click:t.latestCollectionCreateOrder}}),i("view",{directives:[{name:"show",rawName:"v-show",value:t._$s(65,"v-show",t.collectionDetail.surplusSecond>86400),expression:"_$s(65,'v-show',collectionDetail.surplusSecond > 86400)"}],staticClass:t._$s(65,"sc","future-sale"),attrs:{_i:65}},[i("view",{staticClass:t._$s(66,"sc","future-sale1"),attrs:{_i:66}}),i("view",{staticClass:t._$s(67,"sc","future-sale2"),attrs:{_i:67}},[t._v(t._$s(67,"t0-0",t._s(t.collectionDetail.saleTime)))])]),i("view",{directives:[{name:"show",rawName:"v-show",value:t._$s(68,"v-show",t.collectionDetail.surplusSecond>0&&t.collectionDetail.surplusSecond<=86400),expression:"_$s(68,'v-show',collectionDetail.surplusSecond > 0 && collectionDetail.surplusSecond <= 86400)"}],staticClass:t._$s(68,"sc","for-sale"),attrs:{_i:68}},[i("view",{staticClass:t._$s(69,"sc","for-sale1"),attrs:{_i:69}}),i("view",{staticClass:t._$s(70,"sc","for-sale2"),attrs:{_i:70}},[i("u-count-down",{attrs:{"show-days":!1,color:"white","separator-size":"26","separator-color":"white","bg-color":"#4c4c4c","font-size":"26",timestamp:t.collectionDetail.surplusSecond,_i:71}})],1)])]),i("view",{directives:[{name:"show",rawName:"v-show",value:t._$s(72,"v-show",t.hasPreSale),expression:"_$s(72,'v-show',hasPreSale)"}],attrs:{_i:72}},[i("view",{staticClass:t._$s(73,"sc","buy-now"),attrs:{_i:73},on:{click:t.latestCollectionCreateOrder}})])])])])])])},o=[]},5154:function(t,s,i){"use strict";i.r(s);var e=i("db3e"),a=i.n(e);for(var o in e)["default"].indexOf(o)<0&&function(t){i.d(s,t,(function(){return e[t]}))}(o);s["default"]=a.a},d134:function(t,s,i){"use strict";i.r(s);var e=i("3cc9"),a=i("5154");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(s,t,(function(){return a[t]}))}(o);var c=i("828b"),r=Object(c["a"])(a["default"],e["b"],e["c"],!1,null,"19014a68",null,!1,e["a"],void 0);s["default"]=r.exports},db3e:function(t,s,i){"use strict";(function(t){var e=i("47a9");Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a=e(i("b8dc")),o={data:function(){return{collectionId:"",collectionDetail:"",showPayModalFlag:!1,orderId:"",hasPreSale:!1,coverColor:"radial-gradient(circle,rgba(100,0,0,1),rgba(0,0,0,0))"}},onLoad:function(t){this.collectionId=t.id,this.getCollectionDetail()},methods:{isLogin:function(){var t=uni.getStorageSync("tokenName");return null!=t&&""!=t},checkHasPreSale:function(){var s=this;this.$u.get("/transaction/checkHasPreSale",{collectionId:s.collectionId}).then((function(i){s.hasPreSale=i.data,t("log",s.hasPreSale," at subPackages/collection/collectionDetail/collectionDetail.vue:185")}))},creatorPage:function(){uni.navigateTo({url:"../creator/creator?id="+this.collectionDetail.creatorId})},latestCollectionCreateOrder:function(){var t=this;this.$u.post("/transaction/latestCollectionCreateOrder",{collectionId:t.collectionId}).then((function(s){t.orderId=s.data,t.showPayModalFlag=!0}))},confirmPay:function(){var t=this;this.$u.post("/transaction/confirmPay",{orderId:t.orderId}).then((function(s){uni.showToast({icon:"success",title:"\u8d2d\u4e70\u6210\u529f!",duration:2e3,mask:!0,complete:function(){setTimeout((function(){uni.reLaunch({url:"../my/my?tab="+("1"==t.collectionDetail.commodityType?"0":"1")})}),2e3)}})}))},moneyFormat:function(t,s){if(s=s||2,!t&&0!==t)return"";if(isNaN(+t))return"";if(0===t||"0"===t)return"0."+"0".repeat(s);var i=(t+"").split("."),e=i[0]?i[0]:0,a=i[1]?i[1]:0;return a=0===a?"0".repeat(s):(+("0."+a)).toFixed(s).split(".")[1],t=(e+"."+a).replace(/(\d{1,3})(?=(?:\d{3})+\.)/g,"$1,"),t},getCollectionDetail:function(){var t=this;this.$u.get("/collection/findLatestCollectionDetailById",{id:t.collectionId}).then((function(s){t.collectionDetail=s.data,t.collectionDetail.preSaleFlag&&t.isLogin()&&t.checkHasPreSale()}))},coverOnload:function(s){try{var i=new a.default,e=document.querySelector(".cover > img"),o=i.getColor(e);t("log",o," at subPackages/collection/collectionDetail/collectionDetail.vue:268");var c="rgba(".concat(o[0],", ").concat(o[1],", ").concat(o[2],",.9)");this.coverColor="radial-gradient(circle,"+c+",rgba(0,0,0,0))",t("log",this.coverColor," at subPackages/collection/collectionDetail/collectionDetail.vue:275")}catch(r){}}}};s.default=o}).call(this,i("f3b9")["default"])}}]);